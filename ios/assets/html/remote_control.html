<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>VoXtv - Remote</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh; color: #fff; user-select: none;
        }
        nav {
            display: flex; justify-content: center; gap: 8px;
            padding: 14px 20px; background: rgba(0,0,0,0.3);
            border-bottom: 1px solid rgba(255,255,255,0.08);
        }
        nav a {
            color: #aaa; text-decoration: none; padding: 7px 16px;
            border-radius: 20px; font-size: 14px; font-weight: 500; transition: all 0.2s;
        }
        nav a:hover { background: rgba(255,255,255,0.1); color: #fff; }
        nav a.active { background: linear-gradient(90deg, #667eea, #764ba2); color: #fff; }
        .page { max-width: 380px; margin: 0 auto; padding: 20px 16px; }
        h1 {
            text-align: center; margin-bottom: 4px; font-size: 20px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .subtitle { text-align: center; color: #555; margin-bottom: 22px; font-size: 12px; }

        /* ‚îÄ‚îÄ Status bar ‚îÄ‚îÄ */
        #statusBar {
            text-align: center; font-size: 13px; color: #667eea;
            min-height: 22px; margin-bottom: 16px; font-weight: 500;
        }

        /* ‚îÄ‚îÄ Section label ‚îÄ‚îÄ */
        .section-label {
            text-align: center; font-size: 11px; color: #444;
            text-transform: uppercase; letter-spacing: 1px; margin-bottom: 12px;
        }

        /* ‚îÄ‚îÄ Playback controls ‚îÄ‚îÄ */
        .playback-row {
            display: flex; justify-content: center; gap: 14px; margin-bottom: 24px;
        }
        .btn-round {
            width: 56px; height: 56px; border-radius: 50%; border: none;
            display: flex; align-items: center; justify-content: center;
            font-size: 22px; cursor: pointer; transition: all 0.15s;
            background: #1e2a3a; border: 1px solid rgba(255,255,255,0.12);
            color: #fff;
        }
        .btn-round:active { transform: scale(0.88); background: #28394a; }
        .btn-round.primary {
            width: 68px; height: 68px; font-size: 26px;
            background: linear-gradient(135deg, #667eea, #764ba2); border: none;
        }
        .btn-round.primary:active { transform: scale(0.88); }

        /* ‚îÄ‚îÄ D-Pad ‚îÄ‚îÄ */
        .dpad {
            position: relative; width: 200px; height: 200px;
            margin: 0 auto 24px auto;
        }
        .dpad-btn {
            position: absolute; background: #1e2a3a;
            border: 1px solid rgba(255,255,255,0.12);
            border-radius: 12px; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 20px; color: #ccc; transition: all 0.15s;
        }
        .dpad-btn:active { background: #28394a; transform: scale(0.9); }
        .dpad-up    { top: 0;   left: 66px; width: 68px; height: 64px; border-radius: 12px 12px 4px 4px; }
        .dpad-down  { bottom: 0; left: 66px; width: 68px; height: 64px; border-radius: 4px 4px 12px 12px; }
        .dpad-left  { top: 66px; left: 0;    width: 64px; height: 68px; border-radius: 12px 4px 4px 12px; }
        .dpad-right { top: 66px; right: 0;   width: 64px; height: 68px; border-radius: 4px 12px 12px 4px; }
        .dpad-ok {
            top: 66px; left: 66px; width: 68px; height: 68px; border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2); border: none;
            font-size: 14px; font-weight: 700; color: #fff; letter-spacing: 0.5px;
        }
        .dpad-ok:active { transform: scale(0.88); }

        /* ‚îÄ‚îÄ Volume row ‚îÄ‚îÄ */
        .vol-row {
            display: flex; align-items: center; gap: 10px;
            justify-content: center; margin-bottom: 24px;
        }
        .btn-vol {
            flex: 1; max-width: 80px; padding: 14px 0;
            border: none; border-radius: 10px; cursor: pointer;
            font-size: 22px; background: #1e2a3a;
            border: 1px solid rgba(255,255,255,0.12);
            color: #fff; transition: all 0.15s;
        }
        .btn-vol:active { transform: scale(0.9); background: #28394a; }
        .btn-mute {
            flex: 1; max-width: 80px; padding: 14px 0;
            border: none; border-radius: 10px; cursor: pointer;
            font-size: 20px; background: #1e2a3a;
            border: 1px solid rgba(255,255,255,0.12);
            color: #aaa; transition: all 0.15s;
        }
        .btn-mute:active { transform: scale(0.9); }

        /* ‚îÄ‚îÄ Channel row ‚îÄ‚îÄ */
        .ch-row {
            display: flex; gap: 12px; justify-content: center; margin-bottom: 24px;
        }
        .btn-ch {
            flex: 1; max-width: 130px; padding: 13px;
            border: none; border-radius: 10px; cursor: pointer;
            font-size: 15px; font-weight: 600; background: #1e2a3a;
            border: 1px solid rgba(255,255,255,0.12);
            color: #ccc; transition: all 0.15s;
        }
        .btn-ch:active { transform: scale(0.94); background: #28394a; }

        /* ‚îÄ‚îÄ Utility row ‚îÄ‚îÄ */
        .util-row {
            display: flex; gap: 10px; justify-content: center; margin-bottom: 10px;
        }
        .btn-util {
            flex: 1; max-width: 100px; padding: 12px;
            border: none; border-radius: 10px; cursor: pointer;
            font-size: 13px; font-weight: 600; background: #1e2a3a;
            border: 1px solid rgba(255,255,255,0.12);
            color: #bbb; transition: all 0.15s;
        }
        .btn-util:active { transform: scale(0.94); background: #28394a; }

        .lang-btn {
            position: fixed; top: 12px; right: 16px;
            background: #2a3a4a; border: 1px solid rgba(255,255,255,0.15);
            border-radius: 8px; padding: 6px 11px; cursor: pointer;
            font-size: 13px; color: #ccc; transition: all 0.2s;
        }
        .lang-btn:hover { background: #344556; color: #fff; }

        hr { border: none; border-top: 1px solid rgba(255,255,255,0.07); margin: 6px 0 18px; }
    </style>
</head>
<body>
    <button class="lang-btn" onclick="toggleLanguage()" id="langBtn">ES</button>
    <nav>
        <a href="/search" id="nav-search">üîç Search</a>
        <a href="/import" id="nav-import">üì• Import</a>
        <a href="/remote" class="active" id="nav-remote">üéÆ Remote</a>
    </nav>

    <div class="page">
        <h1>üéÆ VoXtv</h1>
        <p class="subtitle" id="subtitle">TV Remote Control</p>

        <div id="statusBar"></div>

        <!-- Playback -->
        <div class="section-label" id="lbl-playback">Playback</div>
        <div class="playback-row">
            <button class="btn-round" onclick="send('stop')" title="Stop">‚èπ</button>
            <button class="btn-round primary" onclick="send('play_pause')" title="Play/Pause">‚èØ</button>
            <button class="btn-round" onclick="send('back')" title="Back">‚¨Ö</button>
        </div>

        <hr>

        <!-- D-Pad -->
        <div class="section-label" id="lbl-nav">Navigation</div>
        <div class="dpad">
            <button class="dpad-btn dpad-up"    onclick="send('up')">‚ñ≤</button>
            <button class="dpad-btn dpad-left"  onclick="send('left')">‚óÄ</button>
            <button class="dpad-btn dpad-ok"    onclick="send('ok')" id="okBtn">OK</button>
            <button class="dpad-btn dpad-right" onclick="send('right')">‚ñ∂</button>
            <button class="dpad-btn dpad-down"  onclick="send('down')">‚ñº</button>
        </div>

        <hr>

        <!-- Volume -->
        <div class="section-label" id="lbl-volume">Volume</div>
        <div class="vol-row">
            <button class="btn-vol" onclick="send('volume_down')">üîâ</button>
            <button class="btn-mute" onclick="send('mute')" id="muteBtn">üîá</button>
            <button class="btn-vol" onclick="send('volume_up')">üîä</button>
        </div>

        <hr>

        <!-- Channels -->
        <div class="section-label" id="lbl-channels">Channels</div>
        <div class="ch-row">
            <button class="btn-ch" onclick="send('channel_up')" id="chUpBtn">‚ñ≤ CH+</button>
            <button class="btn-ch" onclick="send('channel_down')" id="chDownBtn">‚ñº CH‚àí</button>
        </div>

        <hr>

        <!-- Utility -->
        <div class="section-label" id="lbl-utility">Screens</div>
        <div class="util-row">
            <button class="btn-util" onclick="send('home')" id="homeBtn">üè† Home</button>
            <button class="btn-util" onclick="send('favorites')" id="favBtn">‚≠ê Favs</button>
            <button class="btn-util" onclick="send('epg')" id="epgBtn">üìÖ EPG</button>
        </div>
    </div>

    <script>
        const i18n = {
            'es': {
                title: 'VoXtv - Mando', subtitle: 'Control remoto TV',
                lblPlayback: 'Reproduccion', lblNav: 'Navegacion',
                lblVolume: 'Volumen', lblChannels: 'Canales', lblUtility: 'Pantallas',
                okBtn: 'OK', muteBtn: 'üîá',
                chUpBtn: '‚ñ≤ Sig.', chDownBtn: '‚ñº Ant.',
                homeBtn: 'üè† Inicio', favBtn: '‚≠ê Favos', epgBtn: 'üìÖ EPG',
                sent: 'Enviado', error: 'Error de conexion',
                langBtn: 'EN', navSearch: 'Buscar', navImport: 'Importar', navRemote: 'Mando'
            },
            'en': {
                title: 'VoXtv - Remote', subtitle: 'TV Remote Control',
                lblPlayback: 'Playback', lblNav: 'Navigation',
                lblVolume: 'Volume', lblChannels: 'Channels', lblUtility: 'Screens',
                okBtn: 'OK', muteBtn: 'üîá',
                chUpBtn: '‚ñ≤ CH+', chDownBtn: '‚ñº CH‚àí',
                homeBtn: 'üè† Home', favBtn: '‚≠ê Favs', epgBtn: 'üìÖ EPG',
                sent: 'Sent', error: 'Connection error',
                langBtn: 'ES', navSearch: 'Search', navImport: 'Import', navRemote: 'Remote'
            }
        };

        function detectLanguage() {
            const p = new URLSearchParams(window.location.search).get('lang');
            if (p && i18n[p]) return p;
            return (navigator.language || '').toLowerCase().startsWith('es') ? 'es' : 'en';
        }

        let currentLang = detectLanguage();
        let t = i18n[currentLang];

        function applyLanguage() {
            document.documentElement.lang = currentLang;
            document.title = t.title;
            document.getElementById('subtitle').textContent = t.subtitle;
            document.getElementById('lbl-playback').textContent = t.lblPlayback;
            document.getElementById('lbl-nav').textContent = t.lblNav;
            document.getElementById('lbl-volume').textContent = t.lblVolume;
            document.getElementById('lbl-channels').textContent = t.lblChannels;
            document.getElementById('lbl-utility').textContent = t.lblUtility;
            document.getElementById('okBtn').textContent = t.okBtn;
            document.getElementById('chUpBtn').textContent = t.chUpBtn;
            document.getElementById('chDownBtn').textContent = t.chDownBtn;
            document.getElementById('homeBtn').textContent = t.homeBtn;
            document.getElementById('favBtn').textContent = t.favBtn;
            document.getElementById('epgBtn').textContent = t.epgBtn;
            document.getElementById('langBtn').textContent = t.langBtn;
            document.getElementById('nav-search').innerHTML = 'üîç ' + t.navSearch;
            document.getElementById('nav-import').innerHTML = 'üì• ' + t.navImport;
            document.getElementById('nav-remote').innerHTML = 'üéÆ ' + t.navRemote;
        }

        function toggleLanguage() {
            currentLang = currentLang === 'es' ? 'en' : 'es';
            t = i18n[currentLang];
            applyLanguage();
            const url = new URL(window.location);
            url.searchParams.set('lang', currentLang);
            window.history.replaceState({}, '', url);
        }

        applyLanguage();

        let statusTimeout = null;
        function showStatus(msg, ok) {
            const el = document.getElementById('statusBar');
            el.textContent = (ok ? '‚úì ' : '‚úó ') + msg;
            el.style.color = ok ? '#22c55e' : '#ef4444';
            clearTimeout(statusTimeout);
            statusTimeout = setTimeout(() => { el.textContent = ''; }, 2500);
        }

        async function send(command) {
            try {
                const res = await fetch('/api/remote', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({command})
                });
                const data = await res.json();
                showStatus(t.sent + ': ' + command, data.success);
            } catch (e) {
                showStatus(t.error, false);
            }
        }
    </script>
</body>
</html>